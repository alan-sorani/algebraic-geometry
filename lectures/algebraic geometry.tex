\documentclass[10pt,a4paper,twoside,openany,hidelinks]{book}

%JAPANESE
\usepackage{fontspec}
\defaultfontfeatures{Ligatures={NoCommon, NoDiscretionary, NoHistoric, NoRequired, NoContextual}}
\setmainfont{CMU Serif}
\usepackage{xeCJK}
\xeCJKsetup{CJKmath=true}
\setCJKmainfont{MS Mincho} % or some other Japanese font

\usepackage{maths}
\usepackage{stylish}

\usepackage{tkz-graph}
\GraphInit[vstyle = Shade]

\title{Lecture Notes to Fundamental Concepts in Algebraic Geometry \\ \large{Spring 2020, Hebrew University of Jerusalem}}
\author{Ariel Schnidman\\ \large{Typed by Elad Tzorani}}
\date{\today}

\usepackage{lipsum}
\usepackage{stmaryrd}

\tikzset{EdgeStyle/.style   = {thick,
                               double          = orange,
                               double distance = 1pt}}

\tikzset{
    labl0/.style={anchor=south, rotate=-30, inner sep=.5mm}
}

\tikzset{
    labl1/.style={anchor=south, rotate=30, inner sep=.5mm}
}

\tikzset{
    labl2/.style={anchor=south, rotate=60, inner sep=.5mm}
}

\tikzset{
    labl3/.style={anchor=south, rotate=90, inner sep=.5mm}
}

\tikzset{
    labl4/.style={anchor=south, rotate=-90, inner sep=.5mm}
}

\usepackage{scalerel,stackengine}
\stackMath
\newcommand\widecheck[1]{%
\savestack{\tmpbox}{\stretchto{%
  \scaleto{%
    \scalerel*[\widthof{\ensuremath{#1}}]{\kern-.6pt\bigwedge\kern-.6pt}%
    {\rule[-\textheight/2]{1ex}{\textheight}}%WIDTH-LIMITED BIG WEDGE
  }{\textheight}% 
}{0.5ex}}%
\stackon[1pt]{#1}{\scalebox{-1}{\tmpbox}}%
}
\parskip 1ex

\newcommand{\from}{\leftarrow}

\usepackage[nottoc]{tocbibind}

\begin{document}
\frontmatter
\frontpage{front}{0.8\textwidth}{}
\tableofcontents
\countlectures
\newpage

\chapter*{Preface}
\addcontentsline{toc}{chapter}{Preface} \markboth{Preface}{}

\section*{Technicalities}
\addcontentsline{toc}{section}{Technicalities} %\markboth{Technicalities}{}

These aren't formal notes related to the course and henceforward there is \emph{absolutely no guarantee} that the recorded material is in correspondence with the course expectations, or that these notes lack any mistakes.\\
In fact, there probably are mistakes in the notes! I would highly appreciate if any comments or corrections were sent to me via email at \href{mailto:tzorani.elad@gmail.com}{tzorani.elad@gmail.com}.\\
Elad Tzorani.

\mainmatter

\chapter*{Goals of Algebraic Geometry}

The main goals of algebraic geometry are the following.

\begin{itemize}
\item To classify algebraic varieties up to birational isomorphism.
Either by enumeration of the varieties or classification by properties.
\item
Be able to tell whether two algebraic varieties are (birationally) isomorphic. This is done through different tools:
\begin{itemize}
\item Cohomology (related to the Hodge Conjecture).
\item Vector bundles (related to K-theory).
\item Algebraic Cycles (subvarieties).
\item Coherent sheaves (derived category).
\item Topology.
\end{itemize}
\end{itemize}

\chapter{Sheaves}

\section{Basic Definitions}

Let $X \in \Top$.

\begin{definition}
Let $\Top_X$ be the category of open sets on $X$ with inclusions as morphisms.
\end{definition}

\begin{notation}
Denote by $\Ab$ the category of abelian groups.
\end{notation}

\begin{definition}[Presheaf]
A \stress{presheaf (of groups)} on $X$ is a contravariant functor
\[F \colon \Top_X \to \Ab \text{.}\]
\end{definition}

Concretely, to give a presheaf we must give the following:
\begin{enumerate}
\item For each $U \subseteq X$ open, an abelian group $F\prs{U}$.
\item For inclusion $V \rmono U$ of open sets, a group homomorphism $F_{U,V} \colon F\prs{U} \to F\prs{V}$.
\end{enumerate}
Under the conditions:
\begin{enumerate}
\item $F_{U,U} = \id_{F\prs{U}}$.
\item If $W \rmono V \rmono U$ then $W \rmono U$ so the induced maps
\[
\begin{tikzcd}
F\prs{U} \arrow[r] \arrow[rr, bend right = 30] & F\prs{V} \arrow[r] & F\prs{W}
\end{tikzcd}
\]
commute.
\end{enumerate}

\begin{examples}
\begin{enumerate}
\item Let \[F\prs{U} \ceq \hom\prs{U, \RR} = \set{f \colon U \to \RR} \text{.}\]
If $V \subseteq U$ are open,
\begin{align*}
F\prs{U} &\xrightarrow{F_{U,V}} F\prs{V} \\
f &\mapsto \rest{f}{V} \hphantom{F\prs{V}} \text{.}
\end{align*}

This is actually also a presheaf of rings on $X$.

\item \stress{The constant presheaf:} Let $A \in \Ab$ and define
\[F\prs{U} \ceq A, \quad F_{U,V} = \id_A \text{.}\]

\item Let $k$ be an algebraically closed field and $X$ an algebraic variety over $k$. We can think $X \subseteq \PP_k^n$.

Define $\Oo_X\prs{U} \ceq \set{f \colon U \to k}{\text{$f$ is regular}}$.
By ``regular'' we mean that for all $P \in U$ there's a neighbourhood $V \subseteq U$ of $P$ such that
\[\rest{f}{V} = \frac{g}{h}\]
with
$g,h \in k\brs{x_0, \ldots, x_n}$.

\item Let $X = \PP^1$.
Then
$\Oo_{\PP^1}\prs{\PP^1} = k$.
Also
$\Oo_{\PP^1} \prs{\PP^1 \setminus \set{0}} = \set{\frac{g\prs{x,y}}{h\prs{x,y}}}{\substack{g,h \in k\brs{x,y}\\\forall \prs{x,y} \neq \prs{0,1} \colon h\prs{x,y} \neq 0}} = \set{\frac{g\prs{x,y}}{x^{\deg\prs{g}}}}$.
\end{enumerate}
\end{examples}

\begin{definition}[Section, Restriction]
For any $F$ as above, $s \in F\prs{U}$ is called a \stress{section}.
$F_{U,V}\prs{s}$ is written as $\rest{s}{V}$ and called \stress{restriction of $s$ to $V$}.
\end{definition}

\begin{definition}[Global Section]
$F\prs{X} \ceq \Gamma\prs{X,F}$ is the \stress{global section of $F$}.
\end{definition}

\begin{remark}
Why ``section''? Think about $\Oo_X\prs{U}$ and view the diagram
\[
\begin{tikzcd}
U \times k \arrow[d,"\pi_U"] \arrow[r, hook] & X \times k \arrow[d,"\pi"] \\
U \arrow[u, "\tilde{s}", bend left = 40] \arrow[r, hook] & X
\end{tikzcd}
\]
and call $X \times k$ the \stress{trivial line bundle}.

Take $s \in \Oo_X\prs{U}$ which induces a map
\begin{align*}
\tilde{s} \colon U &\to U \times k \\
x &\mapsto \prs{X, s\prs{x}} \text{.}
\end{align*}
Then $\tilde{s}$ is a {section of $\pi$ over $U$}
in the sense that $\pi_U \circ \tilde{s} = \id_U$.
\end{remark}

The idea of sheaves is that global sections are difficult to study topologically, but $F\prs{U}$ is easier to study for $U$ small, and computation on smaller $U$ can imply properties of $F\prs{U}$.

\begin{definition}[Sheaf]
A \stress{sheaf (over an abelian group)} $F$ is a presheaf over an abelian group such that the following holds.
\begin{enumerate}
\item If $U \subseteq X$ is open and $\set{V_i}_{i \in I}$ is an open cover of $U$, and if $s \in F\prs{U}$ such that $\forall i \in I \colon \rest{s}{V_i} = 0$ then $s = 0$.
\item If $U \subseteq X$ is open and $\set{V_i}_{i \in I}$ is an open cover, and if \[\forall i \in I \exists s_i \in F\prs{V_i} \forall i,j \in I \colon \rest{s_i}{V_i \cap V_j} = \rest{s_j}{V_i \cap V_j}\]
then
\[\exists ! s \in F\prs{U} \forall i \in I \colon \rest{s}{V_i} = s_i \text{.}\]
\end{enumerate}
\end{definition}

\begin{remark}
\begin{enumerate}
\item
We could equivalently remove the uniqueness requirement in the second condition as it's implied by the first condition.
\item
With the uniqueness condition, the first condition is implied by the second.
\end{enumerate}
\end{remark}

\begin{remark}
There is a categorical definition of a sheaf over any (not necessarily abelian) category, which might be defined later in these notes.
\end{remark}

\begin{examples}
\begin{enumerate}
\item $\Oo_x$ is a sheaf on $X$.
\item $F\prs{U} = A \in \Ab$ is \stress{not} in general a sheaf unless $A = 0$.

If $X$ has two connected components one can choose different elements of $A$ on two disjoint open sets, which agree on the (empty) intersection, but which we can't lift to the union.
\item Give $A \in \Ab$ the discrete topology.
Define $F_A\prs{U} \ceq \hom_{\mrm{cont}}\prs{U,A}$ the set of continuous functions $U \to A$.
This is a sheaf.

This is sometimes called the \stress{constant sheaf}, although it isn't actually constant.
If $U \subseteq A$ is connected then $F_A\prs{U} \cong A$.
\end{enumerate}
\end{examples}

\begin{definition}[Stalk of a Sheaf]
Let $p \in X$ and $F$ a presheaf on $X$.
The \stress{stalk of $F$ at $p$} is
\[F_p \ceq \lim_{\substack{\longrightarrow \\ p \in U \subseteq X}} F\prs{U} = \quot{\coprod_{p \in U \subseteq X} F\prs{U}}{\substack{\prs{U, s \in F\prs{U}} \sim \prs{V, t \in F\prs{V}} \\ \text{if $\rest{s}{U \cap V} = \rest{t}{U \cap V}$} \hphantom{lala}\text{.}}} \]
\end{definition}

\begin{definition}[Morphism of Presheaves]
Let $F,G$ be presheaves on $X$, a morphism $f \colon F \to G$ is a natural transformation.
\end{definition}

\begin{remark}
Concretely, a morphism $f \colon F \to G$ of presheaves is a group homomorphism
\[f_u \colon F\prs{U} \to G\prs{U}\]
for every $U \subseteq X$ open such that the diagram
\[
\begin{tikzcd}
F\prs{U} \arrow[r, "f_U"] \arrow[d, "\mrm{res}", swap] & G\prs{U}\arrow[d, "\mrm{res}"] \\
F\prs{V} \arrow[r, "f_V", swap] & G\prs{V}
\end{tikzcd}
\]
\end{remark}

\begin{definition}[Isomorphism of Presheaves]
A morphism of presheaves is an isomorphism if it has a two-sided inverse.
\end{definition}

\begin{notation}
If $\phi \colon F \to G$ is a morphism there's a an induced map on stalks
\begin{align*}
\phi_p \colon F_p \to G_p
\end{align*}
for every $p \in X$ where we remind
\begin{align*}
F_p &= \lim_{\substack{\longrightarrow \\ p \in U}} F\prs{U} \\
G_p &= \lim_{\substack{\longrightarrow \\ p \in U}} G\prs{U} \text{.}
\end{align*}
\end{notation}

\begin{definition}[Morphism of Sheaves]
A morphism of sheaves is a morphism between the respective presheaves. 
\end{definition}

\begin{remark}
The above implies that presheaves over $X$ are a full subcategory of sheaves over $X$.
\end{remark}

\begin{proposition}
Let $\phi \colon F \to G$ be a morphism of sheaves.
Then $\phi$ is an isomorphism iff $\phi_p$ is an isomorphism for every $P \in X$.
\end{proposition}

\begin{remark}
The above does \stress{not} say that $F \cong G$ iff $F_p \cong G_p$ for every $p \in X$.

This isn't true.
\end{remark}

\begin{proof}
\begin{description}
\item[$\Rightarrow$:] This is straightforward.
\item[$\Leftarrow$:]
\begin{description}
\item[Injectivity:]
Let $U \subseteq X$ open and $s \in F\prs{U}$ such that $\phi\prs{s} = 0$. WTS (want to show) $s = 0$.

Observe the following commutative diagram.
\[
\begin{tikzcd}
F\prs{U} \arrow[r, "\phi"] \arrow[d] & G\prs{U} \arrow[d] \\
F_p \arrow[r, swap, "\phi_p"] & G_p
\end{tikzcd}
\]
$\phi_p\prs{s_p} = 0$ implies by injectivity $s_p = 0$. Then
\[\exists p \in W_p \subseteq U \colon \rest{s}{W_p} = 0 \text{.}\]
We can cover $U$ by these $\set{W_p}_{o \in U}$ is a cover over $U$ and by the first sheaf condition we get $s = 0$.
\item[Surjectivity:]
Next time.
%TODO continue here
\end{description}
\end{description}
\end{proof}

\backmatter
\end{document}